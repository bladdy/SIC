<div class="card shadow-sm" style="max-width: 400px;">
    <div class="card-body text-center">
        <h5 class="card-title mb-3">📨 Envío de Invitaciones</h5>

        @if (isLoading)
        {
            <button class="btn btn-secondary w-100" disabled>
                <span class="spinner-border spinner-border-sm"></span> Enviando...
            </button>
        }
        else if (completado)
        {
            <button class="btn btn-success w-100" disabled>🎉 Envío completado</button>
        }
        else
        {
            <button class="btn btn-primary w-100" @onclick="EnviarSiguienteTanda">
                @(progreso == null
                    ? "🔍 Iniciar envío"
                    : $"🚀 Enviar tanda {progreso.SiguienteTanda ?? progreso.UltimaTanda + 1}")
            </button>
        }

        @if (!string.IsNullOrEmpty(mensaje))
        {
            <div class="alert alert-info mt-3 p-2">
                @mensaje
            </div>
        }

        @if (progreso != null)
        {
            <div class="mt-3 text-start border-top pt-3 small">
                <p class="mb-1"><strong>Evento:</strong> @progreso.Evento</p>
                <p class="mb-1"><strong>Total Invitaciones:</strong> @progreso.TotalInvitaciones</p>
                <p class="mb-1"><strong>Enviadas:</strong> @progreso.TotalEnviadas</p>
                <p class="mb-1"><strong>Última Tanda:</strong> @progreso.UltimaTanda</p>
                <p class="mb-1"><strong>Total Tandas:</strong> @progreso.TotalTandas</p>
                <p class="mb-1"><strong>Completado:</strong> @(progreso.Completado ? "✅ Sí" : "❌ No")</p>
            </div>
        }
    </div>
</div>
